<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitType - GitHub Typing Test</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0d1117;
            color: #c9d1d9;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 2rem;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 2rem;
            padding: 1rem;
            border-bottom: 1px solid #30363d;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #58a6ff;
            margin-bottom: 0.5rem;
        }
        
        .subtitle {
            color: #8b949e;
            font-size: 1.1rem;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-between;
            background-color: #161b22;
            padding: 1rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            border: 1px solid #30363d;
            flex-wrap: wrap;
        }
        
        .stat {
            text-align: center;
            padding: 0.5rem 1rem;
            min-width: 100px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #58a6ff;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #8b949e;
        }
        
        .code-display {
            background-color: #161b22;
            padding: 1.5rem;
            border-radius: 6px;
            margin-bottom: 1.5rem;
            border: 1px solid #30363d;
            font-family: 'Courier New', Courier, monospace;
            line-height: 1.8;
            min-height: 200px;
            overflow: auto;
        }
        
        .code-line {
            white-space: pre-wrap;
            margin-bottom: 0.5rem;
        }
        
        .correct {
            color: #3fb950;
        }
        
        .incorrect {
            color: #f85149;
            text-decoration: underline;
        }
        
        .current {
            background-color: rgba(46, 160, 67, 0.15);
            border-left: 3px solid #3fb950;
            padding-left: 5px;
        }
        
        .typing-container {
            margin-bottom: 1.5rem;
        }
        
        #typing-input {
            width: 100%;
            background-color: #0d1117;
            border: 1px solid #30363d;
            border-radius: 6px;
            padding: 1rem;
            font-family: 'Courier New', Courier, monospace;
            font-size: 1rem;
            color: #c9d1d9;
            resize: none;
            min-height: 120px;
        }
        
        #typing-input:focus {
            outline: none;
            border-color: #58a6ff;
            box-shadow: 0 0 0 2px rgba(88, 166, 255, 0.3);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .btn {
            background-color: #238636;
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .btn:hover {
            background-color: #2ea043;
        }
        
        .btn-secondary {
            background-color: #30363d;
        }
        
        .btn-secondary:hover {
            background-color: #484f58;
        }
        
        .results {
            background-color: #161b22;
            padding: 1.5rem;
            border-radius: 6px;
            border: 1px solid #30363d;
            text-align: center;
            margin-bottom: 2rem;
            display: none;
        }
        
        .results h2 {
            color: #58a6ff;
            margin-bottom: 1rem;
        }
        
        .results-stats {
            display: flex;
            justify-content: space-around;
            margin: 1.5rem 0;
            flex-wrap: wrap;
        }
        
        .result-stat {
            padding: 1rem;
        }
        
        .result-value {
            font-size: 2rem;
            font-weight: bold;
            color: #58a6ff;
        }
        
        .result-label {
            color: #8b949e;
        }
        
        footer {
            text-align: center;
            margin-top: auto;
            padding: 1.5rem;
            color: #8b949e;
            font-size: 0.9rem;
            border-top: 1px solid #30363d;
        }
        
        .github-corner {
            position: absolute;
            top: 0;
            right: 0;
            border: 0;
            color: #fff;
            fill: #151513;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            
            .stats-container {
                justify-content: center;
            }
            
            .stat {
                min-width: 80px;
                padding: 0.5rem;
            }
            
            .stat-value {
                font-size: 1.5rem;
            }
        }
        
        .language-selector {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .lang-btn {
            background-color: #21262d;
            color: #c9d1d9;
            border: 1px solid #30363d;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .lang-btn.active {
            background-color: #30363d;
            border-color: #58a6ff;
            color: #58a6ff;
        }
    </style>
</head>
<body>
    <a href="https://github.com" class="github-corner" aria-label="View source on GitHub">
        <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
            <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
            <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
            <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
        </svg>
    </a>

    <div class="container">
        <header>
            <h1>GitType</h1>
            <p class="subtitle">Test your typing speed with code snippets</p>
        </header>
        
        <div class="stats-container">
            <div class="stat">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timer">60</div>
                <div class="stat-label">Time</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="score">0</div>
                <div class="stat-label">Score</div>
            </div>
        </div>
        
        <div class="language-selector">
            <button class="lang-btn active" data-lang="javascript">JavaScript</button>
            <button class="lang-btn" data-lang="python">Python</button>
            <button class="lang-btn" data-lang="html">HTML</button>
            <button class="lang-btn" data-lang="css">CSS</button>
        </div>
        
        <div class="code-display" id="code-display">
            <div class="code-line">// Select a language and click Start Test to begin</div>
            <div class="code-line">// Your goal is to type the code as quickly and accurately as possible</div>
        </div>
        
        <div class="typing-container">
            <textarea id="typing-input" placeholder="Start typing here..."></textarea>
        </div>
        
        <div class="controls">
            <button class="btn" id="start-btn">Start Test</button>
            <button class="btn btn-secondary" id="reset-btn">Reset</button>
        </div>
        
        <div class="results" id="results">
            <h2>Test Results</h2>
            <div class="results-stats">
                <div class="result-stat">
                    <div class="result-value" id="result-wpm">0</div>
                    <div class="result-label">WPM</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="result-accuracy">0%</div>
                    <div class="result-label">Accuracy</div>
                </div>
                <div class="result-stat">
                    <div class="result-value" id="result-score">0</div>
                    <div class="result-label">Score</div>
                </div>
            </div>
            <button class="btn" id="retry-btn">Try Again</button>
        </div>
    </div>
    
    <footer>
        <p>GitType &copy; 2023 | Improve your coding speed and accuracy</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const codeDisplay = document.getElementById('code-display');
            const typingInput = document.getElementById('typing-input');
            const startBtn = document.getElementById('start-btn');
            const resetBtn = document.getElementById('reset-btn');
            const retryBtn = document.getElementById('retry-btn');
            const wpmDisplay = document.getElementById('wpm');
            const accuracyDisplay = document.getElementById('accuracy');
            const timerDisplay = document.getElementById('timer');
            const scoreDisplay = document.getElementById('score');
            const resultsDiv = document.getElementById('results');
            const resultWpm = document.getElementById('result-wpm');
            const resultAccuracy = document.getElementById('result-accuracy');
            const resultScore = document.getElementById('result-score');
            const langButtons = document.querySelectorAll('.lang-btn');
            
            // Code snippets
            const codeSnippets = {
                javascript: [
                    `function calculateSum(a, b) {
    return a + b;
}

const result = calculateSum(5, 7);
console.log("The result is:", result);`,
                    `const numbers = [1, 2, 3, 4, 5];
const squared = numbers.map(n => n * n);
console.log("Squared numbers:", squared);`,
                    `class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
    
    greet() {
        console.log(\`Hello, my name is \${this.name}\`);
    }
}`
                ],
                python: [
                    `def calculate_sum(a, b):
    return a + b

result = calculate_sum(5, 7)
print("The result is:", result)`,
                    `numbers = [1, 2, 3, 4, 5]
squared = [n**2 for n in numbers]
print("Squared numbers:", squared)`,
                    `class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age
        
    def greet(self):
        print(f"Hello, my name is {self.name}")`
                ],
                html: [
                    `<!DOCTYPE html>
<html>
<head>
    <title>My Web Page</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Welcome to My Site</h1>
    </header>
    <main>
        <p>This is my awesome web page!</p>
    </main>
</body>
</html>`,
                    `<div class="container">
    <nav class="navbar">
        <ul>
            <li><a href="#home">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>
    </nav>
    <section id="hero">
        <h2>Welcome to our service</h2>
        <button>Get Started</button>
    </section>
</div>`
                ],
                css: [
                    `body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f4f4f4;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
}`,
                    `.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 2rem;
    background-color: #2c3e50;
}

.nav-links {
    display: flex;
    list-style: none;
}

.nav-links li {
    padding: 0 1rem;
}`
                ]
            };
            
            // Variables
            let currentSnippet = '';
            let currentLang = 'javascript';
            let timer;
            let timeLeft = 60;
            let testActive = false;
            let startTime;
            let correctChars = 0;
            let totalChars = 0;
            let wpm = 0;
            let accuracy = 100;
            let score = 0;
            
            // Initialize
            typingInput.disabled = true;
            resetBtn.disabled = true;
            
            // Event listeners
            startBtn.addEventListener('click', startTest);
            resetBtn.addEventListener('click', resetTest);
            retryBtn.addEventListener('click', resetTest);
            typingInput.addEventListener('input', handleInput);
            langButtons.forEach(btn => {
                btn.addEventListener('click', () => {
                    langButtons.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    currentLang = btn.dataset.lang;
                    resetTest();
                });
            });
            
            // Functions
            function startTest() {
                if (testActive) return;
                
                // Load a random snippet for the current language
                const snippets = codeSnippets[currentLang];
                currentSnippet = snippets[Math.floor(Math.random() * snippets.length)];
                
                // Display the code
                displaySnippet();
                
                // Reset stats
                timeLeft = 60;
                correctChars = 0;
                totalChars = 0;
                wpm = 0;
                accuracy = 100;
                score = 0;
                
                // Update UI
                wpmDisplay.textContent = '0';
                accuracyDisplay.textContent = '100%';
                timerDisplay.textContent = timeLeft;
                scoreDisplay.textContent = '0';
                typingInput.value = '';
                typingInput.disabled = false;
                typingInput.focus();
                startBtn.disabled = true;
                resetBtn.disabled = false;
                resultsDiv.style.display = 'none';
                
                // Start the timer
                testActive = true;
                startTime = new Date().getTime();
                timer = setInterval(updateTimer, 1000);
            }
            
            function resetTest() {
                clearInterval(timer);
                testActive = false;
                timeLeft = 60;
                timerDisplay.textContent = timeLeft;
                typingInput.value = '';
                typingInput.disabled = true;
                startBtn.disabled = false;
                resetBtn.disabled = true;
                resultsDiv.style.display = 'none';
                
                // Clear code display
                codeDisplay.innerHTML = '<div class="code-line">// Select a language and click Start Test to begin</div><div class="code-line">// Your goal is to type the code as quickly and accurately as possible</div>';
            }
            
            function updateTimer() {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endTest();
                }
            }
            
            function endTest() {
                clearInterval(timer);
                testActive = false;
                typingInput.disabled = true;
                
                // Calculate final WPM
                const elapsedTime = (new Date().getTime() - startTime) / 1000 / 60; // in minutes
                wpm = Math.round((correctChars / 5) / elapsedTime);
                
                // Update result display
                resultWpm.textContent = wpm;
                resultAccuracy.textContent = accuracy + '%';
                resultScore.textContent = score;
                
                // Show results
                resultsDiv.style.display = 'block';
            }
            
            function displaySnippet() {
                codeDisplay.innerHTML = '';
                const lines = currentSnippet.split('\n');
                
                lines.forEach(line => {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'code-line';
                    lineDiv.textContent = line;
                    codeDisplay.appendChild(lineDiv);
                });
            }
            
            function handleInput() {
                if (!testActive) return;
                
                const typedText = typingInput.value;
                totalChars = typedText.length;
                
                // Calculate accuracy
                let errors = 0;
                for (let i = 0; i < typedText.length; i++) {
                    if (typedText[i] !== currentSnippet[i]) {
                        errors++;
                    }
                }
                
                correctChars = totalChars - errors;
                accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
                
                // Calculate intermediate WPM
                const elapsedTime = (new Date().getTime() - startTime) / 1000 / 60; // in minutes
                wpm = Math.round((correctChars / 5) / elapsedTime);
                
                // Calculate score
                score = wpm * accuracy;
                
                // Update displays
                wpmDisplay.textContent = wpm;
                accuracyDisplay.textContent = accuracy + '%';
                scoreDisplay.textContent = Math.round(score);
                
                // Update code display with formatting
                const lines = currentSnippet.split('\n');
                codeDisplay.innerHTML = '';
                
                let currentLine = '';
                let typedIndex = 0;
                
                lines.forEach(line => {
                    const lineDiv = document.createElement('div');
                    lineDiv.className = 'code-line';
                    
                    for (let i = 0; i < line.length; i++) {
                        const charSpan = document.createElement('span');
                        
                        if (typedIndex < typedText.length) {
                            if (typedText[typedIndex] === line[i]) {
                                charSpan.className = 'correct';
                            } else {
                                charSpan.className = 'incorrect';
                            }
                            typedIndex++;
                        } else if (typedIndex === typedText.length) {
                            charSpan.className = 'current';
                            typedIndex++;
                        }
                        
                        charSpan.textContent = line[i];
                        lineDiv.appendChild(charSpan);
                    }
                    
                    // Add line break character at end of line
                    const lineBreakSpan = document.createElement('span');
                    if (typedIndex < typedText.length && typedText[typedIndex] === '\n') {
                        lineBreakSpan.className = 'correct';
                        typedIndex++;
                    } else if (typedIndex === typedText.length) {
                        lineBreakSpan.className = 'current';
                        typedIndex++;
                    }
                    lineBreakSpan.textContent = '\n';
                    lineDiv.appendChild(lineBreakSpan);
                    
                    codeDisplay.appendChild(lineDiv);
                });
                
                // Check if all text has been typed
                if (typedText === currentSnippet) {
                    endTest();
                }
            }
        });
    </script>
</body>
</html>
